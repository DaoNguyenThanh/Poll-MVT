extends ../layout

block content
  .container
    .row
      .col-lg-8.mx-lg-auto
        h1.title-poll POLL LIST
        h1 Username: #{username}
        .poll-list
          each poll in polls
            fieldset  
              .info 
                legend Tên cuộc khảo sát: #{poll.name}
                each val in poll.questions
                  p= totalVotes
                  .questions
                    p Câu hỏi: #{val.name}
                    if(val.type == 1)
                      p Loại câu hỏi là: Chỉ chọn được một đáp án   
                    else
                      p Loại câu hỏi là: Chọn được nhiều đáp án
                  each ans in val.answers
                    .cover-ans
                      li.answers= ans.name
                      - const totalVotes= ans._count.users
                        .bar
                          .myProgress
                            .progess 
                              span(class='counter')
                                | 0%
                      .voting
                        li.vote-btn 
                          form(action=`/polls/${poll.id}/vote` method='POST')
                            input(type='hidden' name='answer_id' value=`${ans.id}`)
                            button.vote-btn(name="vote-act" type='submit' onclick=`${idAnswer}`) 
                              | Vote
                        p.vote-count(name='') 
                            = ans._count.users
    .cover-btn                   
      a#btn-1(href ='/polls/new') Create new poll
      a#logout-btn(href ='/login/logout') Logout


-
    let item = [
        {
            "id": "login",
            "icon": "fas fa-sign-in-alt",
        },
        {
            "id": "love",
            "icon": "fas fa-heart",
        },
        {
            "id": "community",
            "icon": "fas fa-users",
        },
        {
            "id": "photography",
            "icon": "fas fa-camera",
        },
        {
            "id": "communication",
            "icon": "fas fa-comment-alt",
        },
        {
            "id": "call",
            "icon": "fas fa-phone",
        },
    ]

#container 

    h2 Achievement-Box

    .content

        each id, i in item
            .achievement
                .bar
                    .img-box
                        i(class="" + item[i].icon + "")
                    .progress(class="" + item[i].id + "")
                    p 
                        span(class="" + item[i].id + "-counter")
                            | 0
                        | /5 
                        =item[i].id
    
#button-bar 
    each achievement, i in ['login', 'love', 'community', 'photography', 'communication', 'call']
        button(name="" + item[i].id + "" title="click to fill item-achievement bar")
            i(class="" + item[i].icon + "")