extends ../layout

block content
  .container
    .row
      .col-lg-8.mx-lg-auto
        h1.title-poll POLL LIST
        h1 User: #{user_infor}
        h1 Username: #{user_name}
        .poll-list
          each poll in polls
            fieldset  
              .info 
                legend Tên cuộc khảo sát: #{poll.name}
                each val in poll.questions
                  p Câu hỏi: #{val.name}
                  if(val.type == 1)
                    p Loại câu hỏi là: Chỉ chọn được một đáp án   
                  else
                    p Loại câu hỏi là: Chọn được nhiều đáp án
                  each ans in val.answers
                    div
                      li= ans.name
                      .voting
                        li.vote-btn 
                          form(action=`/polls/${poll.id}/vote` method='POST')
                            input(type='hidden' name='answer_id' value=`${ans.id}`)
                            button.vote-btn(type='submit' onclick=`${idAnswer}`) 
                              | Vote
                        p.vote-count(name='') 
                            = ans._count.users
    .cover-btn                   
      a#btn-1(href ='/polls/new') Create new poll
      a#logout-btn(href ='/login/logout') Logout

  script. 
    //- console.log(#{poll});
      //- button#logout-btn Logout
  
      //- script(defer type='module').
      //-   import * as gAuth from '/javascripts/google-login-gsi.js';
      //-   document.getElementById("#logout-btn").onclick = async (e)=>{
      //-       e.preventDefault();	            
      //-       await gAuth.signOut();	           
      //-   };


    